---
import LogoHori from '../components/logo/LogoHori.astro'
import LanguajeES from '../components/logo/LanguajeES.astro'
import LanguajeUS from '../components/logo/LanguajeUS.astro'

let scrolled = false;
---

<nav 
  id="navbar"
  data-aos="fade-down"
  class={`fixed top-0 z-20 w-full transition-all duration-300  ${
    scrolled ? "bg-zinc-100" : "bg-transparent"
  }`}
>
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="#" class="flex items-center">
        <LogoHori class="logo h-11 text-zinc-100 dark:text-zinc-100" />
        <span class="hidden md:block caprasimo text-zinc-100  dark:text-zinc-100 ms-3 text-4xl">ncima</span>
    </a>
    <div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
        <button type="button" data-dropdown-toggle="language-dropdown-menu" class="languaje inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-zinc-100 dark:text-zinc-100 rounded-lg cursor-pointer">
            <LanguajeES class="mr-2 size-6" />
            Español (ES)
        </button>
        <!-- Dropdown -->
        <div class="z-50 absolute overflow-hidden top-12 hidden my-4 text-base list-none bg-zinc-100 rounded-lg shadow-sm " id="language-dropdown-menu">
          <ul class="font-medium" role="none">
            <li>
              <a href="#" class="block px-4 py-2 text-sm text-amber-700 bg-amber-100" role="menuitem">
                <div class="inline-flex items-center">
                    <LanguajeES class="mr-2 size-6" />
                    Español (ES)
                </div>
              </a>
            </li>
            <li>
                <a href="#" class="block px-4 py-2 text-sm text-zinc-700 hover:bg-amber-100" role="menuitem">
                  <div class="inline-flex items-center">
                      <LanguajeUS class="mr-2 size-6" />
                      English (US)
                  </div>
                </a>
              </li>
          </ul>
        </div>
    </div>
    </div>
  </nav>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
    const button = document.querySelector('[data-dropdown-toggle="language-dropdown-menu"]');
    const dropdownMenu = document.getElementById('language-dropdown-menu');
    const navbar = document.getElementById('navbar');
    const logo = document.querySelector('.logo');
    const spanText = document.querySelector('.caprasimo');
    const languaje = document.querySelector('.languaje');

    if (!navbar) return;

    window.addEventListener("scroll", () => {
      if (window.scrollY > 700) {
        navbar.classList.add("bg-zinc-100");
        navbar.classList.add("dark:bg-zinc-900");

        // Cambiar color del logo y texto al modo claro
        if (logo) logo.classList.replace("text-zinc-100", "text-zinc-900");
        if (spanText) spanText.classList.replace("text-zinc-100", "text-zinc-900");
        if (languaje) languaje.classList.replace("text-zinc-100", "text-zinc-900");
        
      } else {
        navbar.classList.remove("bg-zinc-100");
        navbar.classList.remove("dark:bg-zinc-900");

        // Volver al color original cuando el fondo desaparece
        if (logo) logo.classList.replace("text-zinc-900", "text-zinc-100");
        if (spanText) spanText.classList.replace("text-zinc-900", "text-zinc-100");
        if (languaje) languaje.classList.replace("text-zinc-900", "text-zinc-100");
      }
    });

    // Verifica si los elementos existen antes de agregar el evento
    if (button && dropdownMenu) {
      button.addEventListener('click', () => {
        dropdownMenu.classList.toggle('hidden');
      });
    }
  });
  </script>


  <style>
    .caprasimo {
    font-family: 'Caprasimo', system-ui;
    position: relative;
  }
  </style>